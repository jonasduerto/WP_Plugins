var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,g,b){a instanceof String&&(a=String(a));for(var f=a.length,d=0;d<f;d++){var l=a[d];if(g.call(b,l,d,a))return{i:d,v:l}}return{i:-1,v:void 0}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,g,b){a!=Array.prototype&&a!=Object.prototype&&(a[g]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};
$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,g,b,f){if(g){b=$jscomp.global;a=a.split(".");for(f=0;f<a.length-1;f++){var d=a[f];d in b||(b[d]={});b=b[d]}a=a[a.length-1];f=b[a];g=g(f);g!=f&&null!=g&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:g})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6-impl","es3");
jQuery(function(a){function g(){d.find(".tb_repeatable_field").each(function(c,d){var e=a(this).find('[name="left"]').val();""!==e&&f(e,a(this).find('[name="top"]').val(),++c)})}function b(){if(void 0!==h){var c=a("#image_url",k).val();if(""===c)a("#pointers",k).hide();else{var d=function(c){a("#pointers",k).show();h.find("img").remove();h.prepend(c)},e=a("#image_width",k).val(),b=a("#image_height",k).val(),g=Themify.hash(c+e+b);void 0!==m[g]?d(m[g]):a.ajax({url:themifyBuilder.ajaxurl,method:"POST",
data:{action:"builder_pointers_get_image",pointers_image:c,pointers_width:e,pointers_height:b},beforeSend:function(){h.find(".loading").fadeIn()},success:function(a){m[g]=a;d(m[g])},complete:function(){h.find(".loading").fadeOut()}})}}}function f(c,b,e){return a('<div class="tb-blob" data-id="'+e+'" style="top: '+b+"%; left: "+c+'%;"><div class="tb-blob-icon"></div></div>').appendTo(h).draggable({stop:function(c){var b=a(this);c=100*parseFloat(b.css("top"))/h.height();var e=100*parseFloat(b.css("left"))/
h.width(),b=d.find(".tb_repeatable_field:nth-child("+b.data("id")+")");a('[name="left"]',b).val(e);a('[name="top"]',b).val(c).trigger("keyup");"visual"===themifybuilderapp.mode&&a(document).trigger("mouseup")}})}var d,l,h,k,m=[];a("body").on("editing_module_option",function(c,f,e,n){if("pointers"===f){if(e.image_url){c=e.image_width?e.image_width:"";f=e.image_height?e.image_height:"";var p=Themify.hash(e.image_url+c+f);m[p]='<img src="'+e.image_url+'" width="'+c+'" height="'+f+'" alt="" />'}setTimeout(function(){k=
n;d=a("#blobs_showcase",n);l=d.next("p.add_new").find("a");h=a("#pointers-preview > div",n);b();g()},1E3)}});a("body",top_iframe).on("change","#themify_builder_options_setting #image_url, #themify_builder_options_setting #image_width, #themify_builder_options_setting #image_height",b).on("mousedown touchstart","#pointers-preview .tb-blob",function(){var c=a(this).data("id");h.find(".tb-blob").removeClass("active");a(this).addClass("active");c=d.show().find(".tb_repeatable_field").hide().filter(":nth-child("+
c+")").show();0===c.find(".tb-blob-delete").length&&c.append('<a class="tb-blob-delete" href="#"><i class="fa fa-close"></i></a>');return!1}).on("click touchstart","#pointers-preview img",function(c){var b=100*c.offsetY/a(this).height();c=100*c.offsetX/a(this).width();var e=d.find(".tb_repeatable_field").length+1;l.get(0).click();f(c,b,e).trigger("mousedown");e=d.find(".tb_repeatable_field").last();a('[name="left"]',e).val(c);a('[name="top"]',e).val(b).trigger("keyup")}).on("click touchstart","#pointers .tb-blob-delete",
function(){var b=a(this).closest(".tb_repeatable_field"),f=b.index()+1;h.find('.tb-blob[data-id="'+f+'"]').remove();b.remove();d.find(".tb-blob").remove();g();return!1})});
