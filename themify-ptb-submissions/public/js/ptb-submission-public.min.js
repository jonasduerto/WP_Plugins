var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,h,e){a instanceof String&&(a=String(a));for(var f=a.length,n=0;n<f;n++){var p=a[n];if(h.call(e,p,n,a))return{i:n,v:p}}return{i:-1,v:void 0}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,h,e){a!=Array.prototype&&a!=Object.prototype&&(a[h]=e.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};
$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,h,e,f){if(h){e=$jscomp.global;a=a.split(".");for(f=0;f<a.length-1;f++){var n=a[f];n in e||(e[n]={});e=e[n]}a=a[a.length-1];f=e[a];h=h(f);h!=f&&null!=h&&$jscomp.defineProperty(e,a,{configurable:!0,writable:!0,value:h})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,e){return $jscomp.findInternal(this,a,e).v}},"es6-impl","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var h=0;return $jscomp.iteratorPrototype(function(){return h<a.length?{done:!1,value:a[h++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,h){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var e=0,f={next:function(){if(e<a.length){var n=e++;return{value:h(n,a[n]),done:!1}}f.next=function(){return{done:!0,value:void 0}};return f.next()}};f[Symbol.iterator]=function(){return f};return f};
$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");
(function(a){function h(a){var b=+Math.floor(Math.log(a)/Math.log(1024));return(a/Math.pow(1024,b)).toFixed(b?1:0)+" "+["n/a","B","KB","MB"][isNaN(a)?0:b+1]}var e={},f={},n=function(){a(document).on("click",".ptb_language_tabs li",function(c){c.preventDefault();if(!a(this).hasClass("ptb_active_tab_lng")){c=a(this).closest("ul");var b=c.next("ul");c.find(".ptb_active_tab_lng").removeClass("ptb_active_tab_lng");a(this).addClass("ptb_active_tab_lng");b.find(".ptb_active_lng").removeClass("ptb_active_lng");
b.find("li").eq(a(this).index()).addClass("ptb_active_lng")}})},p=function(c){c.each(function(){var b=a(this).closest(".ptb-submission-text-option"),b=0<b.length?b:a(this).closest(".ptb_module"),c=a(this).closest("form"),l=a(this).data("extension")?new RegExp("(\\.|/)("+a(this).data("extension")+")$","i"):/(\.|\/)(gif|jpe?g|png)$/i,d=a(this).data("size"),k=a(this).data("width"),m=a(this).data("height"),q=b.find(".ptb-submission-priview"),v=a(this);a(this).fileupload({url:c.attr("action"),type:"POST",
acceptFileTypes:l,maxFileSize:d,dataType:"json",singleFileUploads:!0,autoUpload:!1,disableImageResize:/Android(?!.*Chrome)|Opera/.test(window.navigator.userAgent),previewMaxWidth:k?k:100,previewMaxHeight:m?m:100,previewCrop:!0}).on("fileuploadprocessalways",function(b,c){var d=c.files[c.index],k=a('.ptb-submission-upload-btn[for="'+v.attr("id")+'"]');q.next(".ptb-submission-file-danger").remove();q.hide("blind",500,function(){if(d.error)k.html(v.data("label")),a(this).after(a('<span class="ptb-submission-file-danger ptb-submission-error-text"/>').text(d.error));
else{d.preview?(a(this).html(d.preview),0===a(this).closest(".ptb-submission-multi-text").length&&0===a(this).closest(".ptb-submission-module-req").length&&a(this).append('<span data-slug="'+v.attr("id")+'" class="fa fa-minus-circle ptb-submission-file-remove"></span>'),a(this).append('<span class="ptb-submission-file-name">'+d.name+"</span>").append('<span class="ptb-submission-file-size">'+h(d.size)+"</span>").width(c.previewMaxWidth).show("blind",500)):a(this).html("");var b=12<d.name.length?d.name.substring(0,
12)+"...":d.name;k.html("<span>"+b+"</span>")}});if(!d.error)for(var m=0;m<c.files.length;m++){var g=a(this).attr("id");e[g]=c.files[m];f[g]=b.delegateTarget.name}})})},y=function(){a("body").on("click",".ptb_module .ptb-submission-file-remove",function(c){c.preventDefault();c=a(this).closest(".ptb-submission-priview");var b=c.find(".ptb-submission-file-wrap"),g=a(this).data("slug");t(b,g,c)})},t=function(c,b,g){g.hide("blind",500,function(){a(this).empty()});delete f[b];delete e[b];c.html(c.html());
b=a('.ptb-submission-upload-btn[for="'+b+'"');b.html(b.data("label"));p(c.find(".ptb-submission-file"))},z=function(){var c=[];a(".ptb-submission-autocomplete").each(function(){var b=a(this).data("slug"),g=a(this),l=a(this).data("post_type");c[b]={};a(this).autocomplete({minLength:2,source:function(d,k){var m=d.term;m in c[b]?k(c[b][m]):a.ajax({url:ajaxurl,dataType:"json",type:"POST",data:{term:d.term,slug:b,post_type:l,action:"ptb_submission_terms"},success:function(a){c[b][m]=a;k(a)}})},focus:function(a,
b){a.preventDefault()},open:function(){a("ul.ui-menu").width(a(this).innerWidth())},select:function(a,b){g.val(b.item.label);g.next("input").val(b.item.value);return!1}})})},A=function(){var c=a(".ptb_post_tag");if(0<c.length){var b=[];c.each(function(){var c=a(this).find('input[type="text"]'),l=a(this).closest("form").children('input[name="post_type"]').val(),d=/.*?\[.*?\]\[(.+?)\]$/;c.each(function(){var c=a(this).prop("name").match(d);if(0===c.length||!c[1])return!1;c=c[1];b[c]={};a(this).autocomplete({minLength:2,
source:function(d,g){var m=d.term;m in b[c]?g(b[c][m]):a.ajax({url:ajaxurl,dataType:"json",type:"POST",data:{term:d.term.split(/,\s*/).pop(),slug:c,post_type:l,action:"ptb_submission_tag_terms"},success:function(a){b[c][m]=a;g(a)}})},focus:function(a,b){a.preventDefault()},open:function(){a("ul.ui-menu").width(a(this).innerWidth())},select:function(b,c){var d=this.value.split(/,\s*/);if(-1===a.inArray(c.item.label,d))d.pop(),d.push(c.item.label),d.push(""),this.value=d.join(", "),console.log(d);else{var m=
d.indexOf(this.value.split(/,\s*/).pop());d[m]=null;this.value=d.join(", ")}return!1}})})})}},B=function(){var c=a(".ptb-submission-text-option input,.ptb-submission-text-option textarea");c.each(function(){var b=a(this).attr("name");b&&a(this).attr("name",b+"[]")});c=a(".ptb-submission-multi-text li");c.each(function(){if(0<a(this).find(".ptb-submission-priview").length){var b=u();a(this).find("label").prop("for",b);a(this).find('input[type="file"]').prop("id",b)}});c=c=null;a("body").on("click",
".ptb-submission-option-add",function(b){b.preventDefault();b.stopPropagation();var c=a(this).closest(".ptb-submission-multi-text");b=c.data("max");var l=c.find(".ptb-submission-text-option").length;if(!(b&&l>=b)){var d=c.find(".ptb-submission-text-option").first().clone(),c=c.children("ul");d.find("input,textarea").val("");d.find(".ptb-submission-required-error").removeClass("ptb-submission-required-error");var k=d.find(".ptb-submission-priview");a.event.trigger("ptb_submission_before_option_add",
d);if(0<k.length){var m=u();d.find(".ptb-submission-error-text").remove();var q=d.find("label");q.prop("for",m);q.html(q.data("label"));d.find('input[type="file"]').prop("id",m);k.empty().hide()}d.appendTo(c).hide().show("blind",500);0<k.length&&p(a("#"+m));a.event.trigger("ptb_submission_after_option_add",d);c.sortable("refresh");b&&l+1>=b&&a(this).fadeOut()}});a("body").on("click",".ptb-submission-remove",function(b){b.preventDefault();b.stopPropagation();b=a(this).closest(".ptb-submission-text-option");
var c=b.find(".ptb-submission-priview");if(0<c.length){var l=c.closest(".ptb-submission-text-option").find(".ptb-submission-file-wrap"),d=l.find("input").attr("id");t(l,d,c);if(1==b.closest("ul").children("li").length)return b.find("input").val(""),!1}c=a(this).closest(".ptb-submission-multi-text");l=c.data("max");d=c.find(".ptb-submission-text-option").length;l&&d-1<l&&c.find(".ptb-submission-option-add").fadeIn();b.hide("blind",500,function(){a(this).remove()})});w()},u=function(){return"ptb_submission_"+
Math.random().toString(36).substr(2,9)},C=function(){a(".ptb-submission-captcha-refresh").click(function(c){c.preventDefault();var b=a(this).closest("form");b.addClass("ptb-submission-wait");c=a(this).closest("table").find("img");c.attr("src",c.attr("src")).load(function(){b.removeClass("ptb-submission-wait")})})},D=function(){a("body").on("submit",".ptb-submission-form",function(c){c.preventDefault();var b=a(this),g=!0;c=b.find(".ptb-submission-module-req");var l=b.find(".ptb-submission-form-error");
b.find(".ptb-submission-required-error,.ptb-submission-label-required").removeClass("ptb-submission-required-error ptb-submission-label-required");b.find(".switch-html").trigger("click");c.each(function(){var c=a(this);c.find("input,select,textarea").each(function(){var b=!1,d=a(this).attr("name");if(!d)return!1;if(a(this).is(":checkbox")||a(this).is(":radio")){if(0<c.find('[name^="'+d+'"]:checked').length)return!1;b=!0}else if(!a.trim(a(this).val())&&0==a(this).closest(".chosen-container").length){if(a.trim(a(this).closest(".ptb_module").find(".ptb-submission-priview").html()))return!1;
b=!0}d=a(this).closest(".ptb_module").data("type");d=a.event.trigger("ptb_submission_validate_"+d,[a(this),e]);"undefined"!==typeof d&&(b=d);b&&(a(this).addClass("ptb-submission-required-error"),c.addClass("ptb-submission-label-required"),g=!1)})});if(g)if(l.html(""),0<Object.keys(e).length){c=[];var l=[],d=a(".ptb-submission-multi-text");0<d.length&&d.find(">ul>li").each(function(){var c=a(this).find("input,textarea"),b=a(this).index();c.each(function(){var c=a(this).attr("name");c&&(c=c.replace(/\[[0-9]*\]/i,
"["+b+"]"),a(this).attr("name",c))})});for(var k in e)0<a("#"+k).closest(".ptb-submission-multi-text").length&&(d=a("#"+k).closest("li").index(),f[k]=f[k].replace(/\[[0-9]*\]/i,"["+d+"]")),l.push(f[k]),c.push(e[k]);b.addClass("ptb-submission-wait");a(".ptb-submission-file",b).fileupload("send",{files:c,paramName:l}).complete(function(){b.removeClass("ptb-submission-wait")}).success(function(a){x(a,b)})}else a.ajax({url:b.attr("action"),type:"POST",dataType:"json",data:b.serialize(),beforeSend:function(){b.addClass("ptb-submission-wait")},
complete:function(){b.removeClass("ptb-submission-wait")},success:function(a){x(a,b)}});else l.html(ptb_submission.errors)})},x=function(a,b){var c=b.find(".ptb-submission-errors"),l=b.find(".ptb-submission-form-error");c.html("");b.find(".ptb-submission-error-text").remove();if(a)if(a.success)if(a.r)window.location.href=a.success;else{var d=window.location.search?window.location.href+"&":window.location.href+"?";d+="nonce="+a.nonce+"&form_id="+a.form_id;window.location.href=d}else if(a.fee)window.location.href=
a.fee;else{for(var k in a){"captcha"==k&&b.find(".ptb-submission-captcha-refresh").trigger("click");"object"!==typeof a[k]&&(d=a[k],a[k]=[],a[k][0]=1);for(var m in a[k]){var e=b.find('[name^="submission['+k+']"]'),f=0!=m?a[k][m]:d;0==e.length&&(e=b.find('[name^="'+k+'"]'));0<e.length?(e.addClass("ptb-submission-required-error"),e.closest(".ptb_module").addClass("ptb-submission-label-required"),e.first().closest(".ptb_back_active_module_input").append('<div class="ptb-submission-error-text">'+f+"</div>")):
c.append("<div>"+f+"</div>")}}l.html(ptb_submission.errors)}},w=function(){a(".ptb-submission-multi-text>ul").sortable({placeholder:"ui-state-highlight"})},E=function(){a("body").on("focusout",".ptb_number input",function(){var c=parseFloat(a(this).prop("min")),b=parseFloat(a(this).prop("max")),e=parseFloat(a(this).val());e<c?a(this).val(c):e>b&&a(this).val(b);a(this).hasClass("ptb_number_min")?(b=parseFloat(a(this).closest(".ptb_module").find(".ptb_number_max").val()),b<=e&&a(this).val(b-1)):a(this).hasClass("ptb_number_max")&&
(c=parseFloat(a(this).closest(".ptb_module").find(".ptb_number_min").val()),c>=e&&a(this).val(c+1))})},F=function(){a("form.add_temp_tax").submit(function(c){c.preventDefault();var b=a(this);c=b.find('input[type="text"]');var e=!1,f=0<a(this).find(".ptb_language_tabs").length;b.find(".ptb-submission-error-text").remove();b.find(".ptb-submission-required-error").removeClass("ptb-submission-required-error");c.each(function(){if(!a.trim(a(this).val())){if(f){var b=a(this).closest(".ptb_back_active_module_input");
0===b.find(".ptb-submission-error-text").length&&b.append('<span class="ptb-submission-error-text">'+ptb_submission.tax_all_errors+"<span>")}e=!0;a(this).attr("placeholder",ptb_submission.tax_error).addClass("ptb-submission-required-error");a(this).addClass("ptb-submission-required-error")}});if(e)return!1;a.ajax({url:b.prop("action"),data:b.serialize(),type:"POST",dataType:"json",beforeSend:function(){b.addClass("ptb-submission-wait")},complete:function(){b.removeClass("ptb-submission-wait");a("#lightcase-overlay").trigger("click")},
success:function(b){if(b&&b.slug){var c=a("a#ptb_submission_lightbox_"+b.slug);var d=c.closest(".ptb_back_active_module_input");var e=0<d.find("select").length,f=!e&&(0<d.find("input:radio").length||0<d.find("input:checkbox").length),l=!e&&!f&&0<d.find(".ptb-submission-autocomplete").length;if(b.exists)for(var g in b.exists)if(e){var h=d.find("select");h.prop("multiple")||h.find("option:selected").prop("selected",!1);h.find('option[value="'+g+'"]').prop("selected",!0)}else f?d.find("#ptb_tax_"+g).prop("checked",
!0):l&&(d.find('input[type="text"]').val(b.exists[g].title),d.find('input[type="text"]').next("input").val(g));if(b.add){h=a.unique(b.add[b.lng]);var n=f?0<d.find("input:radio").length?"radio":"checkbox":!1;for(g in h)if(e){var p=d.find('option[value="'+h[g].slug+'"]');d.find("select").prop("multiple")||d.find("option").removeAttr("selected");0<p.length?p.prop("selected",!0):d.find("select").prepend('<option value="'+h[g].slug+'" selected="selected">'+h[g].value+"</option>")}else f?("radio"===n&&
d.find("input").prop("checked",!1),p=d.find('input[value="'+h[g].slug+'"]'),0<p.length?p.find("input").prop("checked","checked"):d.prepend('<label class="ptb-submission-new-item"><input name="'+d.find("input[name]").first().prop("name")+'" value="'+h[g].slug+'" type="'+n+'" checked="checked" /><span>'+h[g].value+"</span></label>")):l&&d.find('input[type="text"]').val(h[g].value);var f={},r;for(r in b.add){f[r]=[];for(var t in b.add[r])f[r].push(b.add[r][t].value)}b=c.next("input");c=(c=b.val())?JSON.parse(window.atob(c)):
[];for(g in c)for(var u in c[g])f[g].push(c[g][u]);b.val(window.btoa(JSON.stringify(f)))}e?d.find("select").trigger("chosen:updated").next(".chosen-container").find("a,ul").effect("highlight",{},2E3):a(".ptb-submission-new-item").effect("highlight",{},2E3).removeClass("ptb-submission-new-item")}}})})};a(document).on("ptb_loaded",function(c,b){0<a(".ptb_is_single_lightbox .ptb_lightbox_add_tax").length&&(a(".ptb_is_single_lightbox").removeClass("ptb_is_single_lightbox").addClass("ptb_lightbox_add_tax_wrapper").find('input[type="text"]').each(function(){var b=
a(this).attr("name");b&&a(this).attr("name",b+"[]")}),w(),F())});a(window).load(function(){n();p(a('input[type="file"].ptb-submission-file'));y();z();A();a(".ptb-select").chosen({disable_search_threshold:7,search_contains:!0,width:"100%"});B();C();E();D();a("form.ptb-submission-form").each(function(){a(this).find(".ptb-submission-priview").each(function(){0<a(this).children("*").length&&a(this).show()})})})})(jQuery);
